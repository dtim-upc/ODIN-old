import{f as X}from"./format.31819496.js";import{r as H,H as Y,V as z,n as $,M as A,w as x,g as j,e as L,m as G,L as K,a6 as f,a7 as E,a5 as U,h as J,a8 as Z,a9 as ee,aa as te,a as V,O as m,ab as _,I as ie,ac as le}from"./index.1c9f1618.js";import{r as I,a as oe}from"./focus-manager.32f8d49a.js";import{b as ne,c as re,d as ae,h as se}from"./scroll.8948f4bf.js";const ye={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function xe({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:i,proxy:o,emit:a}=G(),l=H(null);let c;function u(r){return l.value===null?!1:r===void 0||r.touches===void 0||r.touches.length<=1}const s={};n===void 0&&(Object.assign(s,{hide(r){o.hide(r)},toggle(r){o.toggle(r),r.qAnchorHandled=!0},toggleKey(r){Y(r,13)===!0&&s.toggle(r)},contextClick(r){o.hide(r),z(r),$(()=>{o.show(r),r.qAnchorHandled=!0})},prevent:z,mobileTouch(r){if(s.mobileCleanup(r),u(r)!==!0)return;o.hide(r),l.value.classList.add("non-selectable");const h=r.target;A(s,"anchor",[[h,"touchmove","mobileCleanup","passive"],[h,"touchend","mobileCleanup","passive"],[h,"touchcancel","mobileCleanup","passive"],[l.value,"contextmenu","prevent","notPassive"]]),c=setTimeout(()=>{o.show(r),r.qAnchorHandled=!0},300)},mobileCleanup(r){l.value.classList.remove("non-selectable"),clearTimeout(c),e.value===!0&&r!==void 0&&X()}}),n=function(r=i.contextMenu){if(i.noParentEvent===!0||l.value===null)return;let h;r===!0?o.$q.platform.is.mobile===!0?h=[[l.value,"touchstart","mobileTouch","passive"]]:h=[[l.value,"mousedown","hide","passive"],[l.value,"contextmenu","contextClick","notPassive"]]:h=[[l.value,"click","toggle","passive"],[l.value,"keyup","toggleKey","passive"]],A(s,"anchor",h)});function d(){K(s,"anchor")}function w(r){for(l.value=r;l.value.classList.contains("q-anchor--skip");)l.value=l.value.parentNode;n()}function b(){if(i.target===!1||i.target===""||o.$el.parentNode===null)l.value=null;else if(i.target===!0)w(o.$el.parentNode);else{let r=i.target;if(typeof i.target=="string")try{r=document.querySelector(i.target)}catch{r=void 0}r!=null?(l.value=r.$el||r,n()):(l.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return x(()=>i.contextMenu,r=>{l.value!==null&&(d(),n(r))}),x(()=>i.target,()=>{l.value!==null&&d(),b()}),x(()=>i.noParentEvent,r=>{l.value!==null&&(r===!0?d():n())}),j(()=>{b(),t!==!0&&i.modelValue===!0&&l.value===null&&a("update:modelValue",!1)}),L(()=>{clearTimeout(c),d()}),{anchorEl:l,canShow:u,anchorEvents:s}}function He(e,t){const n=H(null);let i;function o(c,u){const s=`${u!==void 0?"add":"remove"}EventListener`,d=u!==void 0?u:i;c!==window&&c[s]("scroll",d,f.passive),window[s]("scroll",d,f.passive),i=u}function a(){n.value!==null&&(o(n.value),n.value=null)}const l=x(()=>e.noParentEvent,()=>{n.value!==null&&(a(),t())});return L(l),{localScrollTarget:n,unconfigureScrollTarget:a,changeScrollEvent:o}}const g=[];function Le(e){return g.find(t=>t.__qPortalInnerRef.value!==null&&t.__qPortalInnerRef.value.contains(e))}function ue(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return E(e)}else if(e.__qPortalInnerRef!==void 0){const n=E(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(t),n):e}e=E(e)}while(e!=null)}function Pe(e,t,n){for(;n!==0&&e!==void 0&&e!==null;){if(e.__qPortalInnerRef!==void 0){if(n--,e.$options.name==="QMenu"){e=ue(e,t);continue}e.hide(t)}e=E(e)}}function ce(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Ee(e,t,n,i){const o=H(!1),a=H(!1);let l=null;const c={},u=i===!0&&ce(e);function s(w){if(w===!0){I(c),a.value=!0;return}a.value=!1,o.value===!1&&(u===!1&&l===null&&(l=ee()),o.value=!0,g.push(e.proxy),oe(c))}function d(w){if(a.value=!1,w!==!0)return;I(c),o.value=!1;const b=g.indexOf(e.proxy);b!==-1&&g.splice(b,1),l!==null&&(te(l),l=null)}return U(()=>{d(!0)}),e.proxy.__qPortalInnerRef=t,{showPortal:s,hidePortal:d,portalIsActive:o,portalIsAccessible:a,renderPortal:()=>u===!0?n():o.value===!0?[J(Z,{to:l},n())]:void 0}}const Se={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Me(e,t){const n=H(t.value);return x(t,i=>{$(()=>{n.value=i})}),{transition:V(()=>"q-transition--"+(n.value===!0?e.transitionHide:e.transitionShow)),transitionStyle:V(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function We(){let e;return L(()=>{e=void 0}),{registerTick(t){e=t,$(()=>{e===t&&(e(),e=void 0)})},removeTick(){e=void 0}}}function qe(){let e;return L(()=>{clearTimeout(e)}),{registerTimeout(t,n){clearTimeout(e),e=setTimeout(t,n)},removeTimeout(){clearTimeout(e)}}}let O;const{notPassiveCapture:S}=f,v=[];function M(e){clearTimeout(O);const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let n=g.length-1;for(;n>=0;){const i=g[n].$;if(i.type.name!=="QDialog")break;if(i.props.seamless!==!0)return;n--}for(let i=v.length-1;i>=0;i--){const o=v[i];if((o.anchorEl.value===null||o.anchorEl.value.contains(t)===!1)&&(t===document.body||o.innerRef.value!==null&&o.innerRef.value.contains(t)===!1))e.qClickOutside=!0,o.onClickOutside(e);else return}}function Ce(e){v.push(e),v.length===1&&(document.addEventListener("mousedown",M,S),document.addEventListener("touchstart",M,S))}function ke(e){const t=v.findIndex(n=>n===e);t>-1&&(v.splice(t,1),v.length===0&&(clearTimeout(O),document.removeEventListener("mousedown",M,S),document.removeEventListener("touchstart",M,S)))}let R,F;function $e(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function ze(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const k={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{k[`${e}#ltr`]=e,k[`${e}#rtl`]=e});function Ae(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:k[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function de(e,t){let{top:n,left:i,right:o,bottom:a,width:l,height:c}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],i-=t[0],a+=t[1],o+=t[0],l+=t[0],c+=t[1]),{top:n,left:i,right:o,bottom:a,width:l,height:c,middle:i+(o-i)/2,center:n+(a-n)/2}}function fe(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function Ve(e){if(m.is.ios===!0&&window.visualViewport!==void 0){const c=document.body.style,{offsetLeft:u,offsetTop:s}=window.visualViewport;u!==R&&(c.setProperty("--q-pe-left",u+"px"),R=u),s!==F&&(c.setProperty("--q-pe-top",s+"px"),F=s)}let t;const{scrollLeft:n,scrollTop:i}=e.el;if(e.absoluteOffset===void 0)t=de(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:c,left:u}=e.anchorEl.getBoundingClientRect(),s=c+e.absoluteOffset.top,d=u+e.absoluteOffset.left;t={top:s,left:d,width:1,height:1,right:d+1,center:s,middle:d,bottom:s+1}}let o={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(o.minWidth=t.width+"px",e.cover===!0&&(o.minHeight=t.height+"px")),Object.assign(e.el.style,o);const a=fe(e.el),l={top:t[e.anchorOrigin.vertical]-a[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-a[e.selfOrigin.horizontal]};he(l,t,a,e.anchorOrigin,e.selfOrigin),o={top:l.top+"px",left:l.left+"px"},l.maxHeight!==void 0&&(o.maxHeight=l.maxHeight+"px",t.height>l.maxHeight&&(o.minHeight=o.maxHeight)),l.maxWidth!==void 0&&(o.maxWidth=l.maxWidth+"px",t.width>l.maxWidth&&(o.minWidth=o.maxWidth)),Object.assign(e.el.style,o),e.el.scrollTop!==i&&(e.el.scrollTop=i),e.el.scrollLeft!==n&&(e.el.scrollLeft=n)}function he(e,t,n,i,o){const a=n.bottom,l=n.right,c=ne(),u=window.innerHeight-c,s=document.body.clientWidth;if(e.top<0||e.top+a>u)if(o.vertical==="center")e.top=t[i.vertical]>u/2?Math.max(0,u-a):0,e.maxHeight=Math.min(a,u);else if(t[i.vertical]>u/2){const d=Math.min(u,i.vertical==="center"?t.center:i.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(a,d),e.top=Math.max(0,d-a)}else e.top=Math.max(0,i.vertical==="center"?t.center:i.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(a,u-e.top);if(e.left<0||e.left+l>s)if(e.maxWidth=Math.min(l,s),o.horizontal==="middle")e.left=t[i.horizontal]>s/2?Math.max(0,s-l):0;else if(t[i.horizontal]>s/2){const d=Math.min(s,i.horizontal==="middle"?t.middle:i.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(l,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,i.horizontal==="middle"?t.middle:i.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(l,s-e.left)}function _e(e,t,n){let i;function o(){i!==void 0&&(_.remove(i),i=void 0)}return L(()=>{e.value===!0&&o()}),{removeFromHistory:o,addToHistory(){i={condition:()=>n.value===!0,handler:t},_.add(i)}}}let T=0,W,q,y,C=!1,B,D,p;function me(e){ve(e)&&ie(e)}function ve(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=le(e),n=e.shiftKey&&!e.deltaX,i=!n&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),o=n||i?e.deltaY:e.deltaX;for(let a=0;a<t.length;a++){const l=t[a];if(se(l,i))return i?o<0&&l.scrollTop===0?!0:o>0&&l.scrollTop+l.clientHeight===l.scrollHeight:o<0&&l.scrollLeft===0?!0:o>0&&l.scrollLeft+l.clientWidth===l.scrollWidth}return!0}function Q(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function P(e){C!==!0&&(C=!0,requestAnimationFrame(()=>{C=!1;const{height:t}=e.target,{clientHeight:n,scrollTop:i}=document.scrollingElement;(y===void 0||t!==window.innerHeight)&&(y=n-t,document.scrollingElement.scrollTop=i),i>y&&(document.scrollingElement.scrollTop-=Math.ceil((i-y)/8))}))}function N(e){const t=document.body,n=window.visualViewport!==void 0;if(e==="add"){const{overflowY:i,overflowX:o}=window.getComputedStyle(t);W=re(window),q=ae(window),B=t.style.left,D=t.style.top,t.style.left=`-${W}px`,t.style.top=`-${q}px`,o!=="hidden"&&(o==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),i!=="hidden"&&(i==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,m.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",P,f.passiveCapture),window.visualViewport.addEventListener("scroll",P,f.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",Q,f.passiveCapture))}m.is.desktop===!0&&m.is.mac===!0&&window[`${e}EventListener`]("wheel",me,f.notPassive),e==="remove"&&(m.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",P,f.passiveCapture),window.visualViewport.removeEventListener("scroll",P,f.passiveCapture)):window.removeEventListener("scroll",Q,f.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=B,t.style.top=D,window.scrollTo(W,q),y=void 0)}function pe(e){let t="add";if(e===!0){if(T++,p!==void 0){clearTimeout(p),p=void 0;return}if(T>1)return}else{if(T===0||(T--,T>0))return;if(t="remove",m.is.ios===!0&&m.is.nativeMobile===!0){clearTimeout(p),p=setTimeout(()=>{N(t),p=void 0},100);return}}N(t)}function Ie(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,pe(t))}}}export{_e as a,Ie as b,ye as c,Se as d,ze as e,We as f,Me as g,He as h,xe as i,Ee as j,Ce as k,ue as l,Le as m,Pe as n,Ae as p,ke as r,Ve as s,qe as u,$e as v};
