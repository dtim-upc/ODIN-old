import{r as E,H as we,N as ie,n as K,M as le,w as b,g as _e,e as L,m as be,L as Ve,O as g,R as $,S as Ie,h as I,U as Qe,V as Ke,W as Ne,a as w,X as p,b as Xe,Y as Ye,f as je,T as Ge,Z as Ue,I as ye,$ as re,a0 as Ze}from"./index.2aa9959a.js";import{c as Je}from"./format.21ab1503.js";import{u as et,a as tt,b as ot}from"./use-model-toggle.21d80c23.js";import{u as nt,a as it}from"./use-dark.174efb17.js";import{r as ae,a as lt,b as rt}from"./focus-manager.32f8d49a.js";import{a as at,g as st,b as ut,c as ct,h as dt}from"./scroll.dc5aaab7.js";const ft={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function vt({showing:e,avoidEmit:t,configureAnchorEl:l}){const{props:o,proxy:i,emit:s}=be(),n=E(null);let f;function d(r){return n.value===null?!1:r===void 0||r.touches===void 0||r.touches.length<=1}const u={};l===void 0&&(Object.assign(u,{hide(r){i.hide(r)},toggle(r){i.toggle(r),r.qAnchorHandled=!0},toggleKey(r){we(r,13)===!0&&u.toggle(r)},contextClick(r){i.hide(r),ie(r),K(()=>{i.show(r),r.qAnchorHandled=!0})},prevent:ie,mobileTouch(r){if(u.mobileCleanup(r),d(r)!==!0)return;i.hide(r),n.value.classList.add("non-selectable");const m=r.target;le(u,"anchor",[[m,"touchmove","mobileCleanup","passive"],[m,"touchend","mobileCleanup","passive"],[m,"touchcancel","mobileCleanup","passive"],[n.value,"contextmenu","prevent","notPassive"]]),f=setTimeout(()=>{i.show(r),r.qAnchorHandled=!0},300)},mobileCleanup(r){n.value.classList.remove("non-selectable"),clearTimeout(f),e.value===!0&&r!==void 0&&Je()}}),l=function(r=o.contextMenu){if(o.noParentEvent===!0||n.value===null)return;let m;r===!0?i.$q.platform.is.mobile===!0?m=[[n.value,"touchstart","mobileTouch","passive"]]:m=[[n.value,"mousedown","hide","passive"],[n.value,"contextmenu","contextClick","notPassive"]]:m=[[n.value,"click","toggle","passive"],[n.value,"keyup","toggleKey","passive"]],le(u,"anchor",m)});function c(){Ve(u,"anchor")}function v(r){for(n.value=r;n.value.classList.contains("q-anchor--skip");)n.value=n.value.parentNode;l()}function h(){if(o.target===!1||o.target===""||i.$el.parentNode===null)n.value=null;else if(o.target===!0)v(i.$el.parentNode);else{let r=o.target;if(typeof o.target=="string")try{r=document.querySelector(o.target)}catch{r=void 0}r!=null?(n.value=r.$el||r,l()):(n.value=null,console.error(`Anchor: target "${o.target}" not found`))}}return b(()=>o.contextMenu,r=>{n.value!==null&&(c(),l(r))}),b(()=>o.target,()=>{n.value!==null&&c(),h()}),b(()=>o.noParentEvent,r=>{n.value!==null&&(r===!0?c():l())}),_e(()=>{h(),t!==!0&&o.modelValue===!0&&n.value===null&&s("update:modelValue",!1)}),L(()=>{clearTimeout(f),c()}),{anchorEl:n,canShow:d,anchorEvents:u}}function ht(e,t){const l=E(null);let o;function i(f,d){const u=`${d!==void 0?"add":"remove"}EventListener`,c=d!==void 0?d:o;f!==window&&f[u]("scroll",c,g.passive),window[u]("scroll",c,g.passive),o=d}function s(){l.value!==null&&(i(l.value),l.value=null)}const n=b(()=>e.noParentEvent,()=>{l.value!==null&&(s(),t())});return L(n),{localScrollTarget:l,unconfigureScrollTarget:s,changeScrollEvent:i}}const k=[];function Vt(e){return k.find(t=>t.__qPortalInnerRef.value!==null&&t.__qPortalInnerRef.value.contains(e))}function Te(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return $(e)}else if(e.__qPortalInnerRef!==void 0){const l=$(e);return l!==void 0&&l.$options.name==="QPopupProxy"?(e.hide(t),l):e}e=$(e)}while(e!=null)}function It(e,t,l){for(;l!==0&&e!==void 0&&e!==null;){if(e.__qPortalInnerRef!==void 0){if(l--,e.$options.name==="QMenu"){e=Te(e,t);continue}e.hide(t)}e=$(e)}}function mt(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function gt(e,t,l,o){const i=E(!1),s=E(!1);let n=null;const f={},d=o===!0&&mt(e);function u(v){if(v===!0){ae(f),s.value=!0;return}s.value=!1,i.value===!1&&(d===!1&&n===null&&(n=Ke()),i.value=!0,k.push(e.proxy),lt(f))}function c(v){if(s.value=!1,v!==!0)return;ae(f),i.value=!1;const h=k.indexOf(e.proxy);h!==-1&&k.splice(h,1),n!==null&&(Ne(n),n=null)}return Ie(()=>{c(!0)}),e.proxy.__qPortalInnerRef=t,{showPortal:u,hidePortal:c,portalIsActive:i,portalIsAccessible:s,renderPortal:()=>d===!0?l():i.value===!0?[I(Qe,{to:n},l())]:void 0}}const pt={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function wt(e,t){const l=E(t.value);return b(t,o=>{K(()=>{l.value=o})}),{transition:w(()=>"q-transition--"+(l.value===!0?e.transitionHide:e.transitionShow)),transitionStyle:w(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}function bt(){let e;return L(()=>{e=void 0}),{registerTick(t){e=t,K(()=>{e===t&&(e(),e=void 0)})},removeTick(){e=void 0}}}function yt(){let e;return L(()=>{clearTimeout(e)}),{registerTimeout(t,l){clearTimeout(e),e=setTimeout(t,l)},removeTimeout(){clearTimeout(e)}}}let xe;const{notPassiveCapture:B}=g,y=[];function F(e){clearTimeout(xe);const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let l=k.length-1;for(;l>=0;){const o=k[l].$;if(o.type.name!=="QDialog")break;if(o.props.seamless!==!0)return;l--}for(let o=y.length-1;o>=0;o--){const i=y[o];if((i.anchorEl.value===null||i.anchorEl.value.contains(t)===!1)&&(t===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(t)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function Tt(e){y.push(e),y.length===1&&(document.addEventListener("mousedown",F,B),document.addEventListener("touchstart",F,B))}function se(e){const t=y.findIndex(l=>l===e);t>-1&&(y.splice(t,1),y.length===0&&(clearTimeout(xe),document.removeEventListener("mousedown",F,B),document.removeEventListener("touchstart",F,B)))}let ue,ce;function de(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function xt(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Q={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Q[`${e}#ltr`]=e,Q[`${e}#rtl`]=e});function fe(e,t){const l=e.split(" ");return{vertical:l[0],horizontal:Q[`${l[1]}#${t===!0?"rtl":"ltr"}`]}}function Et(e,t){let{top:l,left:o,right:i,bottom:s,width:n,height:f}=e.getBoundingClientRect();return t!==void 0&&(l-=t[1],o-=t[0],s+=t[1],i+=t[0],n+=t[0],f+=t[1]),{top:l,left:o,right:i,bottom:s,width:n,height:f,middle:o+(i-o)/2,center:l+(s-l)/2}}function Pt(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function St(e){if(p.is.ios===!0&&window.visualViewport!==void 0){const f=document.body.style,{offsetLeft:d,offsetTop:u}=window.visualViewport;d!==ue&&(f.setProperty("--q-pe-left",d+"px"),ue=d),u!==ce&&(f.setProperty("--q-pe-top",u+"px"),ce=u)}let t;const{scrollLeft:l,scrollTop:o}=e.el;if(e.absoluteOffset===void 0)t=Et(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:f,left:d}=e.anchorEl.getBoundingClientRect(),u=f+e.absoluteOffset.top,c=d+e.absoluteOffset.left;t={top:u,left:c,width:1,height:1,right:c+1,center:u,middle:c,bottom:u+1}}let i={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(i.minWidth=t.width+"px",e.cover===!0&&(i.minHeight=t.height+"px")),Object.assign(e.el.style,i);const s=Pt(e.el),n={top:t[e.anchorOrigin.vertical]-s[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-s[e.selfOrigin.horizontal]};kt(n,t,s,e.anchorOrigin,e.selfOrigin),i={top:n.top+"px",left:n.left+"px"},n.maxHeight!==void 0&&(i.maxHeight=n.maxHeight+"px",t.height>n.maxHeight&&(i.minHeight=i.maxHeight)),n.maxWidth!==void 0&&(i.maxWidth=n.maxWidth+"px",t.width>n.maxWidth&&(i.minWidth=i.maxWidth)),Object.assign(e.el.style,i),e.el.scrollTop!==o&&(e.el.scrollTop=o),e.el.scrollLeft!==l&&(e.el.scrollLeft=l)}function kt(e,t,l,o,i){const s=l.bottom,n=l.right,f=at(),d=window.innerHeight-f,u=document.body.clientWidth;if(e.top<0||e.top+s>d)if(i.vertical==="center")e.top=t[o.vertical]>d/2?Math.max(0,d-s):0,e.maxHeight=Math.min(s,d);else if(t[o.vertical]>d/2){const c=Math.min(d,o.vertical==="center"?t.center:o.vertical===i.vertical?t.bottom:t.top);e.maxHeight=Math.min(s,c),e.top=Math.max(0,c-s)}else e.top=Math.max(0,o.vertical==="center"?t.center:o.vertical===i.vertical?t.top:t.bottom),e.maxHeight=Math.min(s,d-e.top);if(e.left<0||e.left+n>u)if(e.maxWidth=Math.min(n,u),i.horizontal==="middle")e.left=t[o.horizontal]>u/2?Math.max(0,u-n):0;else if(t[o.horizontal]>u/2){const c=Math.min(u,o.horizontal==="middle"?t.middle:o.horizontal===i.horizontal?t.right:t.left);e.maxWidth=Math.min(n,c),e.left=Math.max(0,c-e.maxWidth)}else e.left=Math.max(0,o.horizontal==="middle"?t.middle:o.horizontal===i.horizontal?t.left:t.right),e.maxWidth=Math.min(n,u-e.left)}const T=[];let H;function Ht(e){H=e.keyCode===27}function Lt(){H===!0&&(H=!1)}function qt(e){H===!0&&(H=!1,we(e,27)===!0&&T[T.length-1](e))}function Ee(e){window[e]("keydown",Ht),window[e]("blur",Lt),window[e]("keyup",qt),H=!1}function Ct(e){p.is.desktop===!0&&(T.push(e),T.length===1&&Ee("addEventListener"))}function ve(e){const t=T.indexOf(e);t>-1&&(T.splice(t,1),T.length===0&&Ee("removeEventListener"))}const x=[];function Pe(e){x[x.length-1](e)}function Mt(e){p.is.desktop===!0&&(x.push(e),x.length===1&&document.body.addEventListener("focusin",Pe))}function Wt(e){const t=x.indexOf(e);t>-1&&(x.splice(t,1),x.length===0&&document.body.removeEventListener("focusin",Pe))}var Qt=Xe({name:"QMenu",inheritAttrs:!1,props:{...ft,...et,...nt,...pt,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:de},self:{type:String,validator:de},offset:{type:Array,validator:xt},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...tt,"click","escape-key"],setup(e,{slots:t,emit:l,attrs:o}){let i=null,s,n,f;const d=be(),{proxy:u}=d,{$q:c}=u,v=E(null),h=E(!1),r=w(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),m=it(e,c),{registerTick:Se,removeTick:N}=bt(),{registerTimeout:X,removeTimeout:Y}=yt(),{transition:ke,transitionStyle:He}=wt(e,h),{localScrollTarget:j,changeScrollEvent:Le,unconfigureScrollTarget:qe}=ht(e,oe),{anchorEl:P,canShow:Ce}=vt({showing:h}),{hide:G}=ot({showing:h,canShow:Ce,handleShow:Fe,handleHide:Oe,hideOnRouteChange:r,processOnMount:!0}),{showPortal:U,hidePortal:Z,renderPortal:Me}=gt(d,v,ze),O={anchorEl:P,innerRef:v,onClickOutside(a){if(e.persistent!==!0&&h.value===!0)return G(a),(a.type==="touchstart"||a.target.classList.contains("q-dialog__backdrop"))&&ye(a),!0}},J=w(()=>fe(e.anchor||(e.cover===!0?"center middle":"bottom start"),c.lang.rtl)),We=w(()=>e.cover===!0?J.value:fe(e.self||"top start",c.lang.rtl)),$e=w(()=>(e.square===!0?" q-menu--square":"")+(m.value===!0?" q-menu--dark q-dark":"")),Be=w(()=>e.autoClose===!0?{onClick:Re}:{}),ee=w(()=>h.value===!0&&e.persistent!==!0);b(ee,a=>{a===!0?(Ct(z),Tt(O)):(ve(z),se(O))});function R(){rt(()=>{let a=v.value;a&&a.contains(document.activeElement)!==!0&&(a=a.querySelector("[autofocus], [data-autofocus]")||a,a.focus({preventScroll:!0}))})}function Fe(a){if(N(),Y(),i=e.noRefocus===!1?document.activeElement:null,Mt(ne),U(),oe(),s=void 0,a!==void 0&&(e.touchPosition||e.contextMenu)){const A=Ye(a);if(A.left!==void 0){const{top:Ae,left:De}=P.value.getBoundingClientRect();s={left:A.left-De,top:A.top-Ae}}}n===void 0&&(n=b(()=>c.screen.width+"|"+c.screen.height+"|"+e.self+"|"+e.anchor+"|"+c.lang.rtl,q)),e.noFocus!==!0&&document.activeElement.blur(),Se(()=>{q(),e.noFocus!==!0&&R()}),X(()=>{c.platform.is.ios===!0&&(f=e.autoClose,v.value.click()),q(),U(!0),l("show",a)},e.transitionDuration)}function Oe(a){N(),Y(),Z(),te(!0),i!==null&&(a===void 0||a.qClickOutside!==!0)&&(i.focus(),i=null),X(()=>{Z(!0),l("hide",a)},e.transitionDuration)}function te(a){s=void 0,n!==void 0&&(n(),n=void 0),(a===!0||h.value===!0)&&(Wt(ne),qe(),se(O),ve(z)),a!==!0&&(i=null)}function oe(){(P.value!==null||e.scrollTarget!==void 0)&&(j.value=st(P.value,e.scrollTarget),Le(j.value,q))}function Re(a){f!==!0?(Te(u,a),l("click",a)):f=!1}function ne(a){ee.value===!0&&e.noFocus!==!0&&Ue(v.value,a.target)!==!0&&R()}function z(a){l("escape-key"),G(a)}function q(){const a=v.value;a===null||P.value===null||St({el:a,offset:e.offset,anchorEl:P.value,anchorOrigin:J.value,selfOrigin:We.value,absoluteOffset:s,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ze(){return I(Ge,{name:ke.value,appear:!0},()=>h.value===!0?I("div",{role:"menu",...o,ref:v,tabindex:-1,class:["q-menu q-position-engine scroll"+$e.value,o.class],style:[o.style,He.value],...Be.value},je(t.default)):null)}return L(te),Object.assign(u,{focus:R,updatePosition:q}),Me}});function Kt(e,t,l){let o;function i(){o!==void 0&&(re.remove(o),o=void 0)}return L(()=>{e.value===!0&&i()}),{removeFromHistory:i,addToHistory(){o={condition:()=>l.value===!0,handler:t},re.add(o)}}}let C=0,D,_,M,V=!1,he,me,S;function $t(e){Bt(e)&&ye(e)}function Bt(e){if(e.target===document.body||e.target.classList.contains("q-layout__backdrop"))return!0;const t=Ze(e),l=e.shiftKey&&!e.deltaX,o=!l&&Math.abs(e.deltaX)<=Math.abs(e.deltaY),i=l||o?e.deltaY:e.deltaX;for(let s=0;s<t.length;s++){const n=t[s];if(dt(n,o))return o?i<0&&n.scrollTop===0?!0:i>0&&n.scrollTop+n.clientHeight===n.scrollHeight:i<0&&n.scrollLeft===0?!0:i>0&&n.scrollLeft+n.clientWidth===n.scrollWidth}return!0}function ge(e){e.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function W(e){V!==!0&&(V=!0,requestAnimationFrame(()=>{V=!1;const{height:t}=e.target,{clientHeight:l,scrollTop:o}=document.scrollingElement;(M===void 0||t!==window.innerHeight)&&(M=l-t,document.scrollingElement.scrollTop=o),o>M&&(document.scrollingElement.scrollTop-=Math.ceil((o-M)/8))}))}function pe(e){const t=document.body,l=window.visualViewport!==void 0;if(e==="add"){const{overflowY:o,overflowX:i}=window.getComputedStyle(t);D=ut(window),_=ct(window),he=t.style.left,me=t.style.top,t.style.left=`-${D}px`,t.style.top=`-${_}px`,i!=="hidden"&&(i==="scroll"||t.scrollWidth>window.innerWidth)&&t.classList.add("q-body--force-scrollbar-x"),o!=="hidden"&&(o==="scroll"||t.scrollHeight>window.innerHeight)&&t.classList.add("q-body--force-scrollbar-y"),t.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,p.is.ios===!0&&(l===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",W,g.passiveCapture),window.visualViewport.addEventListener("scroll",W,g.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",ge,g.passiveCapture))}p.is.desktop===!0&&p.is.mac===!0&&window[`${e}EventListener`]("wheel",$t,g.notPassive),e==="remove"&&(p.is.ios===!0&&(l===!0?(window.visualViewport.removeEventListener("resize",W,g.passiveCapture),window.visualViewport.removeEventListener("scroll",W,g.passiveCapture)):window.removeEventListener("scroll",ge,g.passiveCapture)),t.classList.remove("q-body--prevent-scroll"),t.classList.remove("q-body--force-scrollbar-x"),t.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,t.style.left=he,t.style.top=me,window.scrollTo(D,_),M=void 0)}function Ft(e){let t="add";if(e===!0){if(C++,S!==void 0){clearTimeout(S),S=void 0;return}if(C>1)return}else{if(C===0||(C--,C>0))return;if(t="remove",p.is.ios===!0&&p.is.nativeMobile===!0){clearTimeout(S),S=setTimeout(()=>{pe(t),S=void 0},100);return}}pe(t)}function Nt(){let e;return{preventBodyScroll(t){t!==e&&(e!==void 0||t===!0)&&(e=t,Ft(t))}}}export{Qt as Q,Kt as a,Nt as b,ft as c,pt as d,xt as e,bt as f,wt as g,ht as h,vt as i,gt as j,Tt as k,Wt as l,ve as m,Mt as n,Ct as o,fe as p,Vt as q,se as r,St as s,It as t,yt as u,de as v};
