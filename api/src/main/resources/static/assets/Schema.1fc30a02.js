import{a as q,b as oe,Q as le}from"./datasources.store.aceb95f7.js";import{a as I,Q as L}from"./format.30be34e3.js";import{aA as ie,b as se,F as $,r as _,a as c,w as T,e as ce,h as a,m as ue,i as re,aB as de,f as ge,x as j,I as fe,g as me,o as C,q as O,s as l,B as Q,v as o,y as N,z as P,c as ve,aC as he,C as be,aD as _e}from"./index.876f1426.js";import{u as xe,a as Se,b as Ie,Q as p}from"./use-model-toggle.659365cc.js";import{Q as we}from"./QSlideTransition.c1877445.js";import{Q as D}from"./QSeparator.075b25f8.js";import{u as ke,a as Le}from"./use-dark.9ce0ddae.js";import{u as E}from"./uid.42677368.js";import{Q as Te}from"./QScrollArea.8b91609b.js";import{_ as Ce}from"./Graph.17a543c7.js";import"./QResizeObserver.e76af53a.js";import"./QScrollObserver.f6c03b5e.js";import"./scroll.09115f1d.js";import"./touch.70a9dd44.js";import"./use-quasar.a85fc028.js";const f=ie({}),qe=Object.keys($);var G=se({name:"QExpansionItem",props:{...$,...xe,...ke,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:Number,headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Se,"click","after-show","after-hide"],setup(e,{slots:u,emit:d}){const{proxy:{$q:i}}=ue(),b=Le(e,i),n=_(e.modelValue!==null?e.modelValue:e.defaultOpened),g=_(null),m=E(),{show:v,hide:w,toggle:k}=Ie({showing:n});let r,h;const R=c(()=>`q-expansion-item q-item-type q-expansion-item--${n.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),H=c(()=>{if(e.contentInsetLevel===void 0)return null;const t=i.lang.rtl===!0?"Right":"Left";return{["padding"+t]:e.contentInsetLevel*56+"px"}}),x=c(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),M=c(()=>{const t={};return qe.forEach(s=>{t[s]=e[s]}),t}),V=c(()=>x.value===!0||e.expandIconToggle!==!0),K=c(()=>e.expandedIcon!==void 0&&n.value===!0?e.expandedIcon:e.expandIcon||i.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),U=c(()=>e.disable!==!0&&(x.value===!0||e.expandIconToggle===!0)),z=c(()=>({expanded:n.value===!0,detailsId:e.targetUid,toggle:k,show:v,hide:w})),y=c(()=>{const t=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:i.lang.label[n.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":n.value===!0?"true":"false","aria-owns":m,"aria-controls":m,"aria-label":t}});T(()=>e.group,t=>{h!==void 0&&h(),t!==void 0&&A()});function F(t){x.value!==!0&&k(t),d("click",t)}function J(t){t.keyCode===13&&B(t,!0)}function B(t,s){s!==!0&&g.value!==null&&g.value.focus(),k(t),fe(t)}function W(){d("after-show")}function X(){d("after-hide")}function A(){r===void 0&&(r=E()),n.value===!0&&(f[e.group]=r);const t=T(n,S=>{S===!0?f[e.group]=r:f[e.group]===r&&delete f[e.group]}),s=T(()=>f[e.group],(S,ne)=>{ne===r&&S!==void 0&&S!==r&&w()});h=()=>{t(),s(),f[e.group]===r&&delete f[e.group],h=void 0}}function Y(){const t={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},s=[a(j,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&n.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:K.value})];return U.value===!0&&(Object.assign(t,{tabindex:0,...y.value,onClick:B,onKeyup:J}),s.unshift(a("div",{ref:g,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),a(I,t,()=>s)}function Z(){let t;return u.header!==void 0?t=[].concat(u.header(z.value)):(t=[a(I,()=>[a(q,{lines:e.labelLines},()=>e.label||""),e.caption?a(q,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&t[e.switchToggleSide===!0?"push":"unshift"](a(I,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>a(j,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&t[e.switchToggleSide===!0?"unshift":"push"](Y()),t}function ee(){const t={ref:"item",style:e.headerStyle,class:e.headerClass,dark:b.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return V.value===!0&&(t.clickable=!0,t.onClick=F,Object.assign(t,x.value===!0?M.value:y.value)),a(p,t,Z)}function te(){return re(a("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:H.value,id:m},ge(u.default)),[[de,n.value]])}function ae(){const t=[ee(),a(we,{duration:e.duration,onShow:W,onHide:X},te)];return e.expandSeparator===!0&&t.push(a(D,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:b.value}),a(D,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:b.value})),t}return e.group!==void 0&&A(),ce(()=>{h!==void 0&&h()}),()=>a("div",{class:R.value},[a("div",{class:"q-expansion-item__container relative-position"},ae())])}});const Qe={class:"col-2",style:{background:"white"}},pe=Q("h5",null,"Schema",-1),ye={class:"col-10"},Ue={__name:"Schema",setup(e){_(!0);const u=oe(),d=_(""),i=_(""),b=g=>{i.value=g.id,d.value=g.graphicalSchema},n=()=>{console.log("setting global schema view"),console.log(u.getGlobalSchema),i.value="project",d.value=u.getGlobalSchema};return me(()=>{u.datasources.length>0&&n()}),(g,m)=>(C(),O(le,{class:"row items-stretch"},{default:l(()=>[Q("div",Qe,[o(Te,{class:"fit"},{default:l(()=>[o(L,null,{default:l(()=>[o(I,null,{default:l(()=>[o(q,null,{default:l(()=>[pe]),_:1})]),_:1}),o(G,{label:"Global schema","expand-icon":"arrow_drop_down","default-opened":""},{default:l(()=>[o(L,{dense:""},{default:l(()=>[o(p,null,{default:l(()=>[o(N,{flat:"",padding:"xs",label:"project",class:P(["full-width",i.value=="project"?"activebg":""]),align:"left",onClick:m[0]||(m[0]=v=>n())},null,8,["class"])]),_:1})]),_:1})]),_:1}),o(G,{label:"Local schemata","expand-icon":"arrow_drop_down"},{default:l(()=>[o(L,{dense:""},{default:l(()=>[(C(!0),ve(_e,null,he(be(u).datasources,v=>(C(),O(p,null,{default:l(()=>[o(N,{flat:"",padding:"xs",label:v.name,class:P(["full-width",i.value==v.id?"activebg":""]),align:"left",onClick:w=>b(v)},null,8,["label","class","onClick"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1})]),Q("div",ye,[o(Ce,{graphical:d.value},null,8,["graphical"])])]),_:1}))}};export{Ue as default};
